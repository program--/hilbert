<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • hilbert</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="hilbert">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hilbert</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/program--/hilbert/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getting-started_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started</h1>
                        <h4 data-toc-skip class="author">Justin Singh-Mohudpur</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/program--/hilbert/blob/HEAD/vignettes/getting-started.Rmd" class="external-link"><code>vignettes/getting-started.Rmd</code></a></small>
      <div class="hidden name"><code>getting-started.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://hilbert.justinsingh.me" class="external-link">hilbert</a></span><span class="op">)</span></code></pre></div>
<p>The core utilities provided by <code>hilbert</code> involve converting coordinates to grid positions, then grid positions to indices on a Hilbert Curve. This conversion is done <em>without</em> respect to coordinate reference systems (CRS), <strong>but</strong>, the CRS of the original coordinates coincides with the decoded coordinates.</p>
<div class="section level2">
<h2 id="example-dataset">Example Dataset<a class="anchor" aria-label="anchor" href="#example-dataset"></a>
</h2>
<p>Let’s traverse through a simple example of using <code>hilbert</code>. We’ll use a dataset of 1000 seismic events (with some filtered off) that occurred near Fiji since 1964 (see: <a href="https://stat.ethz.ch/R-manual/R-devel/library/datasets/html/quakes.html" class="external-link"><code>quakes</code></a>)</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"quakes"</span><span class="op">)</span>
<span class="va">quakes</span> <span class="op">&lt;-</span> <span class="va">quakes</span><span class="op">[</span><span class="va">quakes</span><span class="op">$</span><span class="va">long</span> <span class="op">&lt;</span> <span class="fl">179.5</span>, <span class="op">]</span></code></pre></div>
<table style="width:100%;" class="table">
<caption>
<em>Sample of Seismic Events (w/ MB &gt; 4.0) Near Fiji Since 1964</em>
</caption>
<thead><tr>
<th style="text-align:left;">
</th>
<th style="text-align:center;">
lat
</th>
<th style="text-align:center;">
long
</th>
<th style="text-align:center;">
depth
</th>
<th style="text-align:center;">
mag
</th>
<th style="text-align:center;">
stations
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
7
</td>
<td style="text-align:center;">
-11.70
</td>
<td style="text-align:center;">
166.10
</td>
<td style="text-align:center;">
82
</td>
<td style="text-align:center;">
4.8
</td>
<td style="text-align:center;">
43
</td>
</tr>
<tr>
<td style="text-align:left;">
12
</td>
<td style="text-align:center;">
-12.26
</td>
<td style="text-align:center;">
167.00
</td>
<td style="text-align:center;">
249
</td>
<td style="text-align:center;">
4.6
</td>
<td style="text-align:center;">
16
</td>
</tr>
<tr>
<td style="text-align:left;">
15
</td>
<td style="text-align:center;">
-20.70
</td>
<td style="text-align:center;">
169.92
</td>
<td style="text-align:center;">
139
</td>
<td style="text-align:center;">
6.1
</td>
<td style="text-align:center;">
94
</td>
</tr>
<tr>
<td style="text-align:left;">
17
</td>
<td style="text-align:center;">
-13.64
</td>
<td style="text-align:center;">
165.96
</td>
<td style="text-align:center;">
50
</td>
<td style="text-align:center;">
6.0
</td>
<td style="text-align:center;">
83
</td>
</tr>
<tr>
<td style="text-align:left;">
22
</td>
<td style="text-align:center;">
-10.98
</td>
<td style="text-align:center;">
166.32
</td>
<td style="text-align:center;">
211
</td>
<td style="text-align:center;">
4.2
</td>
<td style="text-align:center;">
12
</td>
</tr>
<tr>
<td style="text-align:left;">
27
</td>
<td style="text-align:center;">
-14.72
</td>
<td style="text-align:center;">
167.51
</td>
<td style="text-align:center;">
155
</td>
<td style="text-align:center;">
4.6
</td>
<td style="text-align:center;">
18
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="encoding-process">Encoding Process<a class="anchor" aria-label="anchor" href="#encoding-process"></a>
</h2>
<div class="section level3">
<h3 id="extent">Extent<a class="anchor" aria-label="anchor" href="#extent"></a>
</h3>
<p>:::{style=“display:flex;align-items:center;”}</p>
<div style="margin-right:1rem;">
<p><img src="1.png" width="100%" style="border:none;pointer-events:none;user-select:none;"></p>
</div>
<p>::::::{} When exploring this dataset, we see that it is particularly suitable for indexing on a space-filling curve, due to the <em>closeness</em> of points. To index these points, we’ll perform the following operations:</p>
<ol style="list-style-type: decimal">
<li>Get the <strong>extent</strong> of the dataset.</li>
<li>Find the <strong>position</strong> of each point.</li>
<li>Convert the position to the curve <strong>index</strong>.</li>
</ol>
<p>Getting the <strong>extent</strong> of this dataset is easy, it is simply the min/max of both the X and Y coordinates.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">extent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>xmin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">quakes</span><span class="op">$</span><span class="va">long</span><span class="op">)</span>, ymin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">quakes</span><span class="op">$</span><span class="va">lat</span><span class="op">)</span>,
            xmax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">quakes</span><span class="op">$</span><span class="va">long</span><span class="op">)</span>, ymax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">quakes</span><span class="op">$</span><span class="va">lat</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table style="width:100%;" class="table">
<caption>
<em>Quakes Extent</em>
</caption>
<thead><tr>
<th style="text-align:center;">
X-Min
</th>
<th style="text-align:center;">
Y-Min
</th>
<th style="text-align:center;">
X-Max
</th>
<th style="text-align:center;">
Y-Max
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:center;">
165.67
</td>
<td style="text-align:center;">
-38.59
</td>
<td style="text-align:center;">
179.43
</td>
<td style="text-align:center;">
-10.72
</td>
</tr></tbody>
</table>
<p>::::::</p>
<p>:::</p>
<blockquote>
<p><strong>Note:</strong> <em>closeness</em> is often subjective. Generally, the real factor for determining how suitable coordinates are for indexing to a space-filling curve is the precision requirements. In this case, the precision of seismic events need not be highly-precise. However, in the case of coordinates for buildings, then high-precision is usually a requirement.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="position">Position<a class="anchor" aria-label="anchor" href="#position"></a>
</h3>
<p>Now that we have the extent of these coordinates, let’s get the <strong>position</strong>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">positions</span> <span class="op">&lt;-</span> <span class="fu">hilbert</span><span class="fu">::</span><span class="fu"><a href="../reference/coords_to_position.html">coords_to_position</a></span><span class="op">(</span>
    x      <span class="op">=</span> <span class="va">quakes</span>,           <span class="co"># Using the `data.frame` method</span>
    coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"long"</span>, <span class="st">"lat"</span><span class="op">)</span>, <span class="co"># Either the column names or indices for the coordinates</span>
    n      <span class="op">=</span> <span class="fl">4L</span>,               <span class="co"># Dimensions exponent, i.e. 2^n x 2^n grid</span>
    extent <span class="op">=</span> <span class="va">extent</span>,           <span class="co"># The previously found extent</span>
    attach <span class="op">=</span> <span class="cn">FALSE</span>             <span class="co"># When `TRUE`, attaches to the original `data.frame`</span>
<span class="op">)</span></code></pre></div>
<table class="table"><tbody>
<tr class="odd">
<td align="left"><strong>X-Position</strong></td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">2</td>
<td align="left">15</td>
<td align="left">1</td>
<td align="left">15</td>
<td align="left">4</td>
<td align="left">4</td>
<td align="left">12</td>
<td align="left">4</td>
<td align="left">0</td>
<td align="left">8</td>
<td align="left">15</td>
<td align="left">7</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">…</td>
</tr>
<tr class="even">
<td align="left"><strong>Y-Position</strong></td>
<td align="left">15</td>
<td align="left">15</td>
<td align="left">10</td>
<td align="left">14</td>
<td align="left">15</td>
<td align="left">13</td>
<td align="left">9</td>
<td align="left">12</td>
<td align="left">7</td>
<td align="left">11</td>
<td align="left">11</td>
<td align="left">0</td>
<td align="left">11</td>
<td align="left">15</td>
<td align="left">9</td>
<td align="left">8</td>
<td align="left">14</td>
<td align="left">15</td>
<td align="left">15</td>
<td align="left">15</td>
<td align="left">…</td>
</tr>
</tbody></table>
<p>Notice here, we choose <span class="math inline">\(n = 4\)</span>. In the context of our grid, <span class="math inline">\(n\)</span> is the <strong>dimensions exponent</strong>. It determines the dimensions of our underlying grid, such that when <span class="math inline">\(n = 4\)</span>, we have a <span class="math display">\[2^n \times 2^n = 2^4 \times 2^4 = 16 \times 16 \text{ grid.}\]</span> A <span class="math inline">\(2^n \times 2^n\)</span> grid is required due to the construction of a Hilbert Curve, see: <a href="https://wikipedia.org/wiki/Space-filling_curve" class="external-link">Space-filling Curves</a>.</p>
<div style="display:flex;align-items:center;">
<div>
<p>Now that we have our positions, we can visually see the cells that each point falls into. Since the grid in this case is <em>coarse</em>, many points will be indexed to the same cell, for example, the upper left-most cell.</p>
<p>This can be either unwanted or beneficial. If you’re using a space-filling curve for a <strong>spatial index</strong>, this could be beneficial, since points that are closer together will be indexed together, and hence, spatial operations can be improved to only work on points that fall under the same index. For more information, see: <a href="https://en.wikipedia.org/wiki/Spatial_database#Spatial_index" class="external-link">Spatial Index</a>.</p>
<p>If we want to make our grid <em>finer</em>, we can increase the <span class="math inline">\(n\)</span> value used. For example, setting <span class="math inline">\(n = 6\)</span> will give us a <span class="math inline">\(64 \times 64\)</span> grid, which will segement the points further.</p>
</div>
<div style="margin-left:1rem;">
<p><img src="2.png" width="100%" style="border:none;pointer-events:none;user-select:none;"></p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="index">Index<a class="anchor" aria-label="anchor" href="#index"></a>
</h3>
<p>At this point, we can now index our positions. To do this, we simply take our <code>positions</code> data frame, and call <code><a href="../reference/index.html">hilbert::index</a></code>.</p>
<p>The same <span class="math inline">\(n\)</span> <strong>must</strong> be used in both <code><a href="../reference/coords_to_position.html">hilbert::coords_to_position</a></code> and <code><a href="../reference/index.html">hilbert::index</a></code>, otherwise, the indexing calculations will be incorrect.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">indices</span> <span class="op">&lt;-</span> <span class="fu">hilbert</span><span class="fu">::</span><span class="fu"><a href="../reference/index.html">index</a></span><span class="op">(</span><span class="va">positions</span>, coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, n <span class="op">=</span> <span class="fl">4L</span><span class="op">)</span></code></pre></div>
<table class="table"><tbody>
<tr class="odd">
<td align="left"><strong>X-Position</strong></td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">4</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">2</td>
<td align="left">15</td>
<td align="left">1</td>
<td align="left">15</td>
<td align="left">4</td>
<td align="left">4</td>
<td align="left">12</td>
<td align="left">4</td>
<td align="left">0</td>
<td align="left">8</td>
<td align="left">15</td>
<td align="left">7</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">…</td>
</tr>
<tr class="even">
<td align="left"><strong>Y-Position</strong></td>
<td align="left">15</td>
<td align="left">15</td>
<td align="left">10</td>
<td align="left">14</td>
<td align="left">15</td>
<td align="left">13</td>
<td align="left">9</td>
<td align="left">12</td>
<td align="left">7</td>
<td align="left">11</td>
<td align="left">11</td>
<td align="left">0</td>
<td align="left">11</td>
<td align="left">15</td>
<td align="left">9</td>
<td align="left">8</td>
<td align="left">14</td>
<td align="left">15</td>
<td align="left">15</td>
<td align="left">15</td>
<td align="left">…</td>
</tr>
<tr class="odd">
<td align="left"><strong>Index</strong></td>
<td align="left">85</td>
<td align="left">86</td>
<td align="left">118</td>
<td align="left">84</td>
<td align="left">85</td>
<td align="left">93</td>
<td align="left">190</td>
<td align="left">81</td>
<td align="left">192</td>
<td align="left">117</td>
<td align="left">117</td>
<td align="left">240</td>
<td align="left">117</td>
<td align="left">85</td>
<td align="left">129</td>
<td align="left">191</td>
<td align="left">107</td>
<td align="left">85</td>
<td align="left">85</td>
<td align="left">86</td>
<td align="left">…</td>
</tr>
</tbody></table>
<div style="display:flex;align-items:center;">
<div style="width:66%;margin-right:1rem;">
<p><img src="3.png" width="100%" style="border:none;pointer-events:none;user-select:none;"></p>
</div>
<div>
<p>This index corresponds to the cell along the (purple) curve starting from the lower left cell, to the lower right cell.</p>
<p>We see here that space-filling curves provide a <span class="math inline">\({X, Y} \rightarrow I\)</span> mapping.</p>
<p>Another attribute of these indices, is that they are always non-negative, whole numbers.</p>
</div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>In general, users of <code>hilbert</code> will be concerned with indexing coordinates, but we will lay out the general processes here:</p>
<div class="section level4">
<h4 id="encoding">Encoding<a class="anchor" aria-label="anchor" href="#encoding"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>COORDINATES</span>
<span id="cb6-2"><a href="#cb6-2"></a>⟶ hilbert<span class="op">::</span><span class="kw">coords_to_position</span>()</span>
<span id="cb6-3"><a href="#cb6-3"></a>  ⟶ POSITIONS</span>
<span id="cb6-4"><a href="#cb6-4"></a>    ⟶ hilbert<span class="op">::</span><span class="kw">index</span>()</span>
<span id="cb6-5"><a href="#cb6-5"></a>      ⟶ INDICES</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="decoding">Decoding<a class="anchor" aria-label="anchor" href="#decoding"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>INDICES</span>
<span id="cb7-2"><a href="#cb7-2"></a>⟶ hilbert<span class="op">::</span><span class="kw">position</span>()</span>
<span id="cb7-3"><a href="#cb7-3"></a>  ⟶ POSITIONS</span>
<span id="cb7-4"><a href="#cb7-4"></a>    ⟶ hilbert<span class="op">::</span><span class="kw">position_to_coords</span>()</span>
<span id="cb7-5"><a href="#cb7-5"></a>      ⟶ COORDINATES</span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Justin Singh-Mohudpur.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
